<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MyCheckDine  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="MyCheckDine  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">MyCheckDine Docs</a> (86% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">MyCheckDine Reference</a>
        <img id="carat" src="img/carat.png" />
        MyCheckDine  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Dine.html">Dine</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Item.html">Item</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Order.html">Order</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/OrderPoller.html">OrderPoller</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/Status.html">Status</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/OrderPollerDelegate.html">OrderPollerDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Bill.html">Bill</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs.html#/s:V11MyCheckDine16OrderHistoryItem">OrderHistoryItem</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PaymentDetails.html">PaymentDetails</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Settings.html">Settings</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TaxSettings.html">TaxSettings</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs.html#/s:V11MyCheckDine14UserStatistics">UserStatistics</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/UserSummary.html">UserSummary</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <a href='#mycheck-dine-ui-web-sdk' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='mycheck-dine-ui-web-sdk'>MyCheck Dine UI Web SDK</h1>

<p>An SDK that enables the user to open a table at a restaurant, follow the order, reorder items and finally pay . The SDK supplies a View Controller that takes the user through the MyCheck Dine at table experience.</p>

<p>The basic flow of the transactions is:
-  The guest accesses the app to get a four digit code
- The code is given to the guest&rsquo;s food server who will access the open check on the POS and enter the code.
- The POS will connect the check with MyCheck services
- The guest will then be able to see the check and interact with the check by reordering existing items and paying.
- Once the guest pays the check he/she no longer has access to the check.</p>
<a href='#requirements' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='requirements'>Requirements</h2>

<p>iOS 9 or above.</p>

<p>Swift 3.0</p>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>Installation</h2>

<p>MyCheck Restaurant SDK is available through <a href="http://cocoapods.org">CocoaPods</a>. You will first need to ask a MyCheck team member to give you read privileges to the MyCheck Repository. Once you have gotten the privileges, install it by simply adding the following lines to the top of your Podfile:</p>
<pre class="highlight plaintext"><code>source 'https://bitbucket.org/erez_spatz/pod-spec-repo.git'
source 'https://github.com/CocoaPods/Specs.git'
</code></pre>

<p>This will set both the public CocoaPods repo and the MyCheck private repo as targets for CocoaPods to search for frameworks from.</p>

<p>You can add YOUR_USER_NAME@ before the &lsquo;bitbucket.org&rsquo; so the pod tool won&rsquo;t need to ask you for it every time you update or install.</p>

<p>Inside the target add:</p>
<pre class="highlight plaintext"><code>pod "MyCheckDineUIWeb"
</code></pre>

<p>Now you can run &#39;pod install&rsquo;</p>
<a href='#use' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='use'>Use</h2>

<p>In order to manage the users session (login, logout etc.) you will need to use the session singleton.</p>

<p>Start by adding
<code>
import MyCheckCore
</code></p>

<p>to the top of the class where you want to use MyCheck.</p>

<p>In your app delegate&rsquo;s <code>application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</code> function call the configure function of the Session singleton:</p>
<pre class="highlight plaintext"><code>Session.shared.configure(YOUR_PUBLISHABLE_KEY, environment: .sandbox)
</code></pre>

<p>This will setup the SDK to work with the desired environment.</p>

<p>Before using any other functions you will have to login the user. Login is done by first obtaining a refresh token from your server (that, in turn, will obtain it from the MyCheck server using the secret). Once you have the refresh token call the login function on the Session singleton:</p>
<pre class="highlight plaintext"><code>Session.shared.login(REFRESH_TOKEN, success: HANDLE_SUCCESS
}, fail: HANDLE_FAIL)

</code></pre>
<a href='#open-a-new-table' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='open-a-new-table'>Open a new table</h4>

<p>Once you are logged in, you can open a table and create a DineInWebViewController object that will take the user through the Dine In process.
<code>
import MyCheckCore
import MyCheckDineUIWeb
</code>
A 4 digit pin will need to be generated and a ViewController instance created.  Use the <em>DineInWebViewControllerFactory</em> objet for this purpose. You will need to pass the business Id the user want to dine at.</p>
<pre class="highlight plaintext"><code>DineInWebViewControllerFactory.dineIn(at: THE_BUSSINESS_ID , locale:THE_LOCALE, delegate: self)

</code></pre>

<p>Note that you will have to implement the <em>DineInWebViewControllerDelegate</em>. It will send you the ViewController when it is created, notify you of any errors, and update you when the user finished using the view controller (including the reason he finished and the last order state. Also, more parameters will need to be passed in order to support Apple Pay</p>
<a href='#display-an-existing-open-table' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='display-an-existing-open-table'>Display an existing open table</h4>

<p>If you would like to check wether or not a table is already open (e.g. when the app starts up) you will need to use the <em>Dine</em> singleton. </p>

<p>Dine.shared.getOrder(success: { order in
//react to an open order
}, fail: {error in
//failed to get an open order
})</p>

<p>If an open order exists, create a <em>DineInWebViewController</em> using the factory method intended for open orders, and pass it the order you have just received from the getOrder callback.</p>
<pre class="highlight plaintext"><code>DineInWebViewControllerFactory.dineInWithOpenOrder.dineIn(order: THE_ORDER, locale:THE_LOCALE, delegate: self)

</code></pre>
<a href='#apple-pay' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='apple-pay'>Apple Pay</h4>

<p>In order to support Apple Pay <em>DineInWebViewControllerFactory</em> s methods must be called with an <em>applePayController</em> and a <em>displayDelegate</em> .   </p>
<pre class="highlight plaintext"><code>DineInWebViewControllerFactory.dineIn(at: THE_BUSSINESS_ID ,
locale:THE_LOCALE,
displayDelegate: self,
applePayController: Wallet.shared.applePayController
delegate: self)

</code></pre>

<p>They will enable the SDK to display Apple Pay UI in order to create tokens and charge the user.</p>
<a href='#authors' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='authors'>Authors</h2>

<p>Elad Schiller, <a href="mailto:eladsc@mycheck.co.il">eladsc@mycheck.co.il</a></p>
<a href='#license' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='license'>License</h2>

<p>Please read the LICENSE file available in the project</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2017 <a class="link" href="http://www.mycheck.io/" target="_blank" rel="external">elad schiller</a>. All rights reserved. (Last updated: 2017-09-03)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
